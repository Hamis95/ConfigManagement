# Harjoitus 1


**a)**
Aloitin harjoituksen asentamalla kaksi virtuaalikonetta ja liittämällä ne yhteen virtualboxin host-only network adapterilla, jotta koneille tulisi omat ip osoittee
ja ne pystyisivät kommunikoimaan.
![nampb](https://github.com/Hamis95/ConfigManagement/raw/main/host-only.png)

Testasin että koneet pystyvät kommunikoimaan keskenään SSH protokolalla. Sain masterista SSH yhteyden slave-koneeseen.

Tämän jälkeen asensin master koneelle salt masterin
```$ sudo apt install salt-master```

Tämän jälkeen siirryin slave-koneelle ja asensin siihen salt-minionin
```$ sudo apt install salt-minion```

Tämän jälkeen piti editoida salt-minionin config tiedostoa käskyllä

```$ sudoedit /etc/salt/minion```

Tänne tiedostoon lisäsin rivin:
master: 192.168.56.106

Tämä on master koneen IP-osoite.

Tämän jälkeen salt-minion palvelu tulee käynnistää uudellee, jotta se ottaa uudet asetukset käyttöön ja yrittää ottaa yhteyden salt-master koneeseen.

```$ sudo systemctl restart salt-minion.service```

Nyt siirrytään master koneeseen ja tarkistetaan onko tullut uusia salt avaimia.

```$ sudo salt-key -A```

Avain oli tullut ja hyväksyin sen.


Tämän jälkee testasin master-koneesta, että sillä on yhteys minioniin.

```$sudo salt '*' network.ip_addrs```
Tämä käsky kerää minionien IP-osoitteet (huomiona: asensin myös master koneeseen salt minionin)

![nampb](https://github.com/Hamis95/ConfigManagement/blob/main/miniontesti.png)

Tästä näkee verkon sisäisen IP-osoitteen ja Host-only IP-osoitteen erikseen.
salt master-minion ei siis toimisi saman koneen virtuaalikoneilla ilman host-only networkkia.

**b)**

Tämä tehtiin jo tunnilla, mutta kertaan sen läpi

Master koneen **/srv/salt** kansioon tehdään .sls loppuinen tiedosto

Tämän tiedoston sisälle voi lisätä mitä käskyjä ja ehtoja haluaa lisätä minion koneilleen.

```
/tmp/tervehenri.txt:
  file.managed:
    - source: salt://tervehenri.txt 
```

Tässä kopioidaan tiedosto **/srv/salt/** kansiosta ja sen kohteeksi tulee slave-koneen **/tmp/** kansio

Sitten tehdään tiedosto, joka halutaan kopioida slavelle.

Tein siis tervehenri.txt tiedoston, jonne lisäsin muutaman lauseen tekstiä.

Tämän jälkeen **hellohenri.sls** voidaan juosta käskyllä:

```sudo salt 'henri' state.apply hello```


![nampb](https://github.com/Hamis95/ConfigManagement/blob/main/hellohenri.png)


saltstate toimi ja se lisättiin slave-koneeseen onnistuneesti.


**c)**


Seuraavaksi kerätään salt komennoilla tietoa slave-koneesta

aloitan yksinkertaisella:

```sudo salt 'henri' grains.items```

Käsky printtaa ison määrän tietoa slave-koneesta




